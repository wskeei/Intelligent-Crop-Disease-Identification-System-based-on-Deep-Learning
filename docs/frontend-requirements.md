
# CropVision-AI å‰ç«¯éœ€æ±‚æ–‡æ¡£

> ç‰ˆæœ¬: v1.0  
> æ›´æ–°æ—¥æœŸ: 2024-12-18  
> çŠ¶æ€: å¾…å¼€å‘

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

CropVision-AI æ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å†œä½œç‰©ç—…å®³æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿã€‚å‰ç«¯éœ€è¦æä¾›ä¸€ä¸ªç°ä»£åŒ–ã€ä¸“ä¸šçº§çš„ Web ç•Œé¢ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°ä¸Šä¼ å†œä½œç‰©å›¾ç‰‡ã€è·å–ç—…å®³è¯†åˆ«ç»“æœã€æŸ¥çœ‹å†å²è®°å½•å’Œæ•°æ®ç»Ÿè®¡ã€‚

### 1.2 æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ |
|------|----------|------|
| æ ¸å¿ƒæ¡†æ¶ | Vue 3 (Composition API) | ^3.4 |
| å¼€å‘è¯­è¨€ | TypeScript | ^5.3 |
| æ„å»ºå·¥å…· | Vite | ^5.0 |
| UI ç»„ä»¶åº“ | Element Plus | ^2.4 |
| çŠ¶æ€ç®¡ç† | Pinia | ^2.1 |
| è·¯ç”±ç®¡ç† | Vue Router | ^4.2 |
| HTTP å®¢æˆ·ç«¯ | Axios | ^1.6 |
| å›¾è¡¨åº“ | ECharts | ^5.4 |
| CSS é¢„å¤„ç† | SCSS | - |
| ä»£ç è§„èŒƒ | ESLint + Prettier | - |

### 1.3 æµè§ˆå™¨å…¼å®¹æ€§

- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

---

## äºŒã€åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

### 2.1 æ•´ä½“å¸ƒå±€ (Layout)

#### 2.1.1 ä¾§è¾¹æ å¯¼èˆª (Sidebar)

| èœå•é¡¹ | å›¾æ ‡ | è·¯ç”± | æè¿° |
|--------|------|------|------|
| å·¥ä½œå° | Dashboard | `/` | é¦–é¡µæ•°æ®æ¦‚è§ˆ |
| æ™ºèƒ½è¯†åˆ« | Camera | `/predict` | æ ¸å¿ƒè¯†åˆ«åŠŸèƒ½ |
| å†å²è®°å½• | Clock | `/history` | è¯†åˆ«å†å²æŸ¥è¯¢ |
| æ•°æ®åˆ†æ | PieChart | `/analytics` | ç»Ÿè®¡å›¾è¡¨å¤§å± |
| ç—…å®³çŸ¥è¯†åº“ | Book | `/diseases` | ç—…å®³ç™¾ç§‘ |
| ç³»ç»Ÿè®¾ç½® | Setting | `/settings` | ä¸ªæ€§åŒ–é…ç½® |

#### 2.1.2 é¡¶éƒ¨å¯¼èˆªæ  (Header)

- Logo + ç³»ç»Ÿåç§°
- é¢åŒ…å±‘å¯¼èˆª
- å…¨å±€æœç´¢æ¡†
- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® (äº®è‰²/æš—è‰²)
- é€šçŸ¥ä¸­å¿ƒå›¾æ ‡
- ç”¨æˆ·å¤´åƒä¸‹æ‹‰èœå•

#### 2.1.3 å“åº”å¼è®¾è®¡

- æ¡Œé¢ç«¯ (>= 1200px): å®Œæ•´ä¾§è¾¹æ 
- å¹³æ¿ç«¯ (768px - 1199px): æŠ˜å ä¾§è¾¹æ 
- ç§»åŠ¨ç«¯ (< 768px): æŠ½å±‰å¼ä¾§è¾¹æ 

---

### 2.2 å·¥ä½œå°é¡µé¢ (Dashboard)

**è·¯ç”±**: `/`

#### 2.2.1 ç»Ÿè®¡å¡ç‰‡åŒº

| å¡ç‰‡ | æ•°æ®æ¥æº | å±•ç¤ºå†…å®¹ |
|------|----------|----------|
| ä»Šæ—¥è¯†åˆ«æ•° | `/api/stats` | æ•°å­— + ç¯æ¯”å¢é•¿ |
| æ€»è¯†åˆ«æ•° | `/api/stats` | æ•°å­— |
| å¥åº·ä½œç‰©å æ¯” | `/api/stats` | ç™¾åˆ†æ¯” + è¿›åº¦æ¡ |
| æ”¯æŒä½œç‰©ç§ç±» | é™æ€æ•°æ® | 14 ç§ |

#### 2.2.2 å¿«æ·æ“ä½œåŒº

- ã€Œå¼€å§‹è¯†åˆ«ã€å¤§æŒ‰é’® â†’ è·³è½¬ `/predict`
- ã€ŒæŸ¥çœ‹å†å²ã€æŒ‰é’® â†’ è·³è½¬ `/history`
- ã€Œæ•°æ®æŠ¥å‘Šã€æŒ‰é’® â†’ è·³è½¬ `/analytics`

#### 2.2.3 æœ€è¿‘è¯†åˆ«è®°å½•

- å±•ç¤ºæœ€è¿‘ 5 æ¡è¯†åˆ«è®°å½•
- æ¯æ¡æ˜¾ç¤º: ç¼©ç•¥å›¾ã€ç—…å®³åç§°ã€ç½®ä¿¡åº¦ã€æ—¶é—´
- ã€ŒæŸ¥çœ‹æ›´å¤šã€é“¾æ¥ â†’ è·³è½¬ `/history`

#### 2.2.4 ç—…å®³åˆ†å¸ƒå›¾

- é¥¼å›¾å±•ç¤º Top 5 ç—…å®³ç±»å‹åˆ†å¸ƒ
- æ•°æ®æ¥æº: `/api/stats`

---

### 2.3 æ™ºèƒ½è¯†åˆ«é¡µé¢ (Predict)

**è·¯ç”±**: `/predict`

#### 2.3.1 å›¾ç‰‡ä¸Šä¼ åŒº

**åŠŸèƒ½éœ€æ±‚**:
- æ”¯æŒç‚¹å‡»ä¸Šä¼ 
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
- æ”¯æŒç²˜è´´ä¸Šä¼  (Ctrl+V)
- æ”¯æŒæ‘„åƒå¤´æ‹ç…§ (ç§»åŠ¨ç«¯)
- å›¾ç‰‡æ ¼å¼é™åˆ¶: JPG, PNG, WebP
- å›¾ç‰‡å¤§å°é™åˆ¶: æœ€å¤§ 10MB
- ä¸Šä¼ å‰é¢„è§ˆ
- ä¸Šä¼ è¿›åº¦æ˜¾ç¤º

**UI è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚     ğŸ“· ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„ä¸Šä¼       â”‚
â”‚                                     â”‚
â”‚     æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼         â”‚
â”‚     æœ€å¤§ 10MB                        â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.2 è¯†åˆ«ç»“æœå±•ç¤º

**ä¸»è¦ç»“æœå¡ç‰‡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ… ç•ªèŒ„ - æ—©ç–«ç—…                    â”‚
â”‚  Tomato - Early Blight              â”‚
â”‚                                     â”‚
â”‚  ç½®ä¿¡åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85.6%           â”‚
â”‚                                     â”‚
â”‚  [æŸ¥çœ‹è¯¦æƒ…] [é‡æ–°è¯†åˆ«] [ä¿å­˜ç»“æœ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…¶ä»–å¯èƒ½ç»“æœ** (Top 3):
| æ’å | ç—…å®³åç§° | ç½®ä¿¡åº¦ |
|------|----------|--------|
| 2 | ç•ªèŒ„ - æ™šç–«ç—… | 8.2% |
| 3 | ç•ªèŒ„ - å¶éœ‰ç—… | 3.1% |

#### 2.3.3 ç—…å®³è¯¦æƒ…å¼¹çª—

ç‚¹å‡»ã€ŒæŸ¥çœ‹è¯¦æƒ…ã€å±•ç¤º:
- ç—…å®³ä¸­è‹±æ–‡åç§°
- ç—…å®³å›¾ç‰‡ç¤ºä¾‹
- ç—‡çŠ¶æè¿°
- å‘ç—…æ¡ä»¶
- é˜²æ²»å»ºè®®
- æ¨èç”¨è¯

#### 2.3.4 è¯†åˆ«å†å²å¯¹æ¯”

- å¯é€‰æ‹©å†å²å›¾ç‰‡ä¸å½“å‰ç»“æœå¯¹æ¯”
- å·¦å³åˆ†æ å±•ç¤º

---

### 2.4 å†å²è®°å½•é¡µé¢ (History)

**è·¯ç”±**: `/history`

#### 2.4.1 ç­›é€‰æ¡ä»¶åŒº

| ç­›é€‰é¡¹ | ç±»å‹ | é€‰é¡¹ |
|--------|------|------|
| ä½œç‰©ç±»å‹ | ä¸‹æ‹‰å¤šé€‰ | è‹¹æœã€ç•ªèŒ„ã€ç‰ç±³ç­‰ 14 ç§ |
| ç—…å®³çŠ¶æ€ | å•é€‰ | å…¨éƒ¨ / å¥åº· / ç—…å®³ |
| æ—¶é—´èŒƒå›´ | æ—¥æœŸé€‰æ‹©å™¨ | å¼€å§‹æ—¥æœŸ - ç»“æŸæ—¥æœŸ |
| ç½®ä¿¡åº¦ | æ»‘å— | 0% - 100% |
| å…³é”®è¯ | è¾“å…¥æ¡† | æœç´¢ç—…å®³åç§° |

#### 2.4.2 è§†å›¾åˆ‡æ¢

- **åˆ—è¡¨è§†å›¾**: è¡¨æ ¼å½¢å¼ï¼Œé€‚åˆæ‰¹é‡æ“ä½œ
- **å¡ç‰‡è§†å›¾**: ç½‘æ ¼å½¢å¼ï¼Œé€‚åˆæµè§ˆå›¾ç‰‡

#### 2.4.3 åˆ—è¡¨è§†å›¾è¡¨æ ¼

| åˆ—å | å®½åº¦ | æ’åº | è¯´æ˜ |
|------|------|------|------|
| ç¼©ç•¥å›¾ | 80px | å¦ | ç‚¹å‡»æ”¾å¤§ |
| ç—…å®³åç§° | 200px | æ˜¯ | ä¸­æ–‡åç§° |
| ä½œç‰©ç±»å‹ | 120px | æ˜¯ | æå–è‡ªç—…å®³åç§° |
| ç½®ä¿¡åº¦ | 120px | æ˜¯ | è¿›åº¦æ¡ + ç™¾åˆ†æ¯” |
| è¯†åˆ«æ—¶é—´ | 180px | æ˜¯ | æ ¼å¼åŒ–æ—¶é—´ |
| æ“ä½œ | 150px | å¦ | æŸ¥çœ‹ / åˆ é™¤ |

#### 2.4.4 æ‰¹é‡æ“ä½œ

- å…¨é€‰ / å–æ¶ˆå…¨é€‰
- æ‰¹é‡åˆ é™¤
- æ‰¹é‡å¯¼å‡º (CSV/Excel)

#### 2.4.5 åˆ†é¡µ

- æ¯é¡µæ¡æ•°: 10 / 20 / 50 / 100
- é¡µç è·³è½¬
- æ€»è®°å½•æ•°æ˜¾ç¤º

---

### 2.5 æ•°æ®åˆ†æé¡µé¢ (Analytics)

**è·¯ç”±**: `/analytics`

#### 2.5.1 æ—¶é—´èŒƒå›´é€‰æ‹©

- å¿«æ·é€‰é¡¹: ä»Šæ—¥ / æœ¬å‘¨ / æœ¬æœˆ / æœ¬å¹´ / å…¨éƒ¨
- è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´

#### 2.5.2 å›¾è¡¨ç»„ä»¶

**å›¾è¡¨ 1: ç—…å®³ç±»å‹åˆ†å¸ƒé¥¼å›¾**
- å±•ç¤ºå„ç—…å®³ç±»å‹å æ¯”
- æ”¯æŒç‚¹å‡»å›¾ä¾‹ç­›é€‰
- æ˜¾ç¤ºæ•°é‡å’Œç™¾åˆ†æ¯”

**å›¾è¡¨ 2: è¯†åˆ«è¶‹åŠ¿æŠ˜çº¿å›¾**
- X è½´: æ—¥æœŸ
- Y è½´: è¯†åˆ«æ•°é‡
- åŒçº¿: æ€»è¯†åˆ«æ•° / ç—…å®³æ£€å‡ºæ•°

**å›¾è¡¨ 3: ä½œç‰©å¥åº·çŠ¶å†µæŸ±çŠ¶å›¾**
- X è½´: ä½œç‰©ç±»å‹
- Y è½´: æ•°é‡
- å †å : å¥åº· / ç—…å®³

**å›¾è¡¨ 4: è¯†åˆ«çƒ­åŠ›å›¾**
- æŒ‰å‘¨/æœˆå±•ç¤ºè¯†åˆ«é¢‘æ¬¡
- é¢œè‰²æ·±æµ…è¡¨ç¤ºæ•°é‡

**å›¾è¡¨ 5: Top 10 ç—…å®³æ’è¡Œæ¦œ**
- æ¨ªå‘æŸ±çŠ¶å›¾
- æ˜¾ç¤ºç—…å®³åç§°å’Œæ•°é‡

#### 2.5.3 æ•°æ®å¯¼å‡º

- å¯¼å‡ºä¸º PNG å›¾ç‰‡
- å¯¼å‡ºä¸º PDF æŠ¥å‘Š
- å¯¼å‡ºåŸå§‹æ•°æ® (CSV)

---

### 2.6 ç—…å®³çŸ¥è¯†åº“é¡µé¢ (Diseases)

**è·¯ç”±**: `/diseases`

#### 2.6.1 ä½œç‰©åˆ†ç±»å¯¼èˆª

ä¾§è¾¹åˆ†ç±»æ ‘:
```
â”œâ”€â”€ ğŸ è‹¹æœ (4)
â”‚   â”œâ”€â”€ è‹¹æœé»‘æ˜Ÿç—…
â”‚   â”œâ”€â”€ è‹¹æœé»‘è…ç—…
â”‚   â”œâ”€â”€ è‹¹æœé›ªæ¾é”ˆç—…
â”‚   â””â”€â”€ å¥åº·
â”œâ”€â”€ ğŸ… ç•ªèŒ„ (10)
â”œâ”€â”€ ğŸŒ½ ç‰ç±³ (4)
â”œâ”€â”€ ğŸ‡ è‘¡è„ (4)
â”œâ”€â”€ ğŸ¥” é©¬é“ƒè–¯ (3)
â”œâ”€â”€ ğŸ‘ æ¡ƒå­ (2)
â”œâ”€â”€ ğŸ«‘ ç”œæ¤’ (2)
â”œâ”€â”€ ğŸ“ è‰è“ (2)
â”œâ”€â”€ ğŸ’ æ¨±æ¡ƒ (2)
â”œâ”€â”€ ğŸ« è“è“ (1)
â”œâ”€â”€ ğŸŠ æ©™å­ (1)
â”œâ”€â”€ ğŸ«› å¤§è±† (1)
â”œâ”€â”€ ğŸƒ å—ç“œ (1)
â””â”€â”€ ğŸ« æ ‘è“ (1)
```

#### 2.6.2 ç—…å®³å¡ç‰‡åˆ—è¡¨

æ¯ä¸ªå¡ç‰‡å±•ç¤º:
- ç—…å®³ç¤ºä¾‹å›¾ç‰‡
- ä¸­æ–‡åç§°
- è‹±æ–‡åç§°
- ç®€çŸ­æè¿°
- ã€ŒæŸ¥çœ‹è¯¦æƒ…ã€æŒ‰é’®

#### 2.6.3 ç—…å®³è¯¦æƒ…é¡µ

**è·¯ç”±**: `/diseases/:id`

å†…å®¹ç»“æ„:
```markdown
# ç•ªèŒ„æ—©ç–«ç—… (Tomato Early Blight)

## åŸºæœ¬ä¿¡æ¯
- ç—…åŸ: èŒ„é“¾æ ¼å­¢èŒ (Alternaria solani)
- å±å®³éƒ¨ä½: å¶ç‰‡ã€èŒã€æœå®
- å‘ç—…å­£èŠ‚: æ˜¥æœ«è‡³ç§‹å­£

## ç—‡çŠ¶æè¿°
å¶ç‰‡ä¸Šå‡ºç°åœ†å½¢æˆ–è¿‘åœ†å½¢è¤è‰²ç—…æ–‘ï¼Œå…·æœ‰æ˜æ˜¾çš„åŒå¿ƒè½®çº¹...

## å‘ç—…æ¡ä»¶
- æ¸©åº¦: 20-25Â°C
- æ¹¿åº¦: é«˜æ¹¿ç¯å¢ƒ
- å…¶ä»–: è¿ä½œã€æ°®è‚¥è¿‡å¤š

## é˜²æ²»æ–¹æ³•
### å†œä¸šé˜²æ²»
1. é€‰ç”¨æŠ—ç—…å“ç§
2. åˆç†è½®ä½œ
3. æ¸…é™¤ç—…æ®‹ä½“

### åŒ–å­¦é˜²æ²»
| è¯å‰‚åç§° | ä½¿ç”¨æµ“åº¦ | ä½¿ç”¨æ–¹æ³• |
|----------|----------|----------|
| ç™¾èŒæ¸… | 75% WP 600å€æ¶² | å¶é¢å–·é›¾ |
| ä»£æ£®é”°é”Œ | 80% WP 500å€æ¶² | å¶é¢å–·é›¾ |

## ç›¸å…³å›¾ç‰‡
[ç—…å®³å›¾ç‰‡ç”»å»Š]
```

---

### 2.7 ç³»ç»Ÿè®¾ç½®é¡µé¢ (Settings)

**è·¯ç”±**: `/settings`

#### 2.7.1 å¤–è§‚è®¾ç½®

| è®¾ç½®é¡¹ | ç±»å‹ | é€‰é¡¹ |
|--------|------|------|
| ä¸»é¢˜æ¨¡å¼ | å•é€‰ | äº®è‰² / æš—è‰² / è·Ÿéšç³»ç»Ÿ |
| ä¸»é¢˜è‰² | é¢œè‰²é€‰æ‹©å™¨ | é¢„è®¾è‰² + è‡ªå®šä¹‰ |
| ä¾§è¾¹æ  | å¼€å…³ | å±•å¼€ / æŠ˜å  |
| è¯­è¨€ | ä¸‹æ‹‰ | ç®€ä½“ä¸­æ–‡ / English |

#### 2.7.2 é€šçŸ¥è®¾ç½®

| è®¾ç½®é¡¹ | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| è¯†åˆ«å®Œæˆé€šçŸ¥ | å¼€å…³ | æµè§ˆå™¨é€šçŸ¥ |
| å£°éŸ³æç¤º | å¼€å…³ | è¯†åˆ«å®ŒæˆéŸ³æ•ˆ |

#### 2.7.3 æ•°æ®ç®¡ç†

- æ¸…é™¤æœ¬åœ°ç¼“å­˜
- å¯¼å‡ºæ‰€æœ‰æ•°æ®
- é‡ç½®è®¾ç½®

#### 2.7.4 å…³äºç³»ç»Ÿ

- ç³»ç»Ÿç‰ˆæœ¬
- æ¨¡å‹ç‰ˆæœ¬
- æ”¯æŒçš„ä½œç‰©/ç—…å®³æ•°é‡
- å¼€æºåè®®
- è”ç³»æ–¹å¼

---

## ä¸‰ã€é€šç”¨ç»„ä»¶è®¾è®¡

### 3.1 ç»„ä»¶æ¸…å•

| ç»„ä»¶å | è·¯å¾„ | æè¿° |
|--------|------|------|
| `AppLayout` | `layouts/AppLayout.vue` | æ•´ä½“é¡µé¢å¸ƒå±€ |
| `AppSidebar` | `layouts/AppSidebar.vue` | ä¾§è¾¹æ å¯¼èˆª |
| `AppHeader` | `layouts/AppHeader.vue` | é¡¶éƒ¨å¯¼èˆªæ  |
| `ImageUploader` | `components/ImageUploader.vue` | å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ |
| `ResultCard` | `components/ResultCard.vue` | è¯†åˆ«ç»“æœå¡ç‰‡ |
| `DiseaseCard` | `components/DiseaseCard.vue` | ç—…å®³ä¿¡æ¯å¡ç‰‡ |
| `StatCard` | `components/StatCard.vue` | ç»Ÿè®¡æ•°æ®å¡ç‰‡ |
| `DataTable` | `components/DataTable.vue` | æ•°æ®è¡¨æ ¼ |
| `PieChart` | `components/charts/PieChart.vue` | é¥¼å›¾ç»„ä»¶ |
| `LineChart` | `components/charts/LineChart.vue` | æŠ˜çº¿å›¾ç»„ä»¶ |
| `BarChart` | `components/charts/BarChart.vue` | æŸ±çŠ¶å›¾ç»„ä»¶ |
| `HeatmapChart` | `components/charts/HeatmapChart.vue` | çƒ­åŠ›å›¾ç»„ä»¶ |
| `EmptyState` | `components/EmptyState.vue` | ç©ºçŠ¶æ€å ä½ |
| `LoadingSkeleton` | `components/LoadingSkeleton.vue` | éª¨æ¶å± |
| `ImagePreview` | `components/ImagePreview.vue` | å›¾ç‰‡é¢„è§ˆ |
| `ConfirmDialog` | `components/ConfirmDialog.vue` | ç¡®è®¤å¯¹è¯æ¡† |

### 3.2 ç»„ä»¶ Props å®šä¹‰

#### ImageUploader

```typescript
interface ImageUploaderProps {
  accept?: string;           // æ¥å—çš„æ–‡ä»¶ç±»å‹ï¼Œé»˜è®¤ 'image/*'
  maxSize?: number;          // æœ€å¤§æ–‡ä»¶å¤§å°(MB)ï¼Œé»˜è®¤ 10
  multiple?: boolean;        // æ˜¯å¦å¤šé€‰ï¼Œé»˜è®¤ false
  disabled?: boolean;        // æ˜¯å¦ç¦ç”¨
  showPreview?: boolean;     // æ˜¯å¦æ˜¾ç¤ºé¢„è§ˆï¼Œé»˜è®¤ true
}

interface ImageUploaderEmits {
  (e: 'upload', file: File): void;
  (e: 'error', message: string): void;
}
```

#### ResultCard

```typescript
interface ResultCardProps {
  result: {
    predictedClass: string;
    confidence: number;
    imageUrl: string;
  };
  loading?: boolean;
  showActions?: boolean;
}
```

#### StatCard

```typescript
interface StatCardProps {
  title: string;
  value: number | string;
  icon?: string;
  trend?: {
    value: number;
    isUp: boolean;
  };
  color?: 'primary' | 'success' | 'warning' | 'danger';
}
```

---

## å››ã€API æ¥å£è®¾è®¡

### 4.1 ç°æœ‰æ¥å£ (åç«¯å·²å®ç°)

| æ¥å£ | æ–¹æ³• | æè¿° | çŠ¶æ€ |
|------|------|------|------|
| `/api/predict` | POST | ä¸Šä¼ å›¾ç‰‡è¿›è¡Œç—…å®³è¯†åˆ« | âœ… å·²å®ç° |
| `/api/history` | GET | è·å–è¯†åˆ«å†å²åˆ—è¡¨ | âœ… å·²å®ç° |
| `/api/stats` | GET | è·å–ç»Ÿè®¡æ•°æ® | âœ… å·²å®ç° |

### 4.2 éœ€è¦æ–°å¢çš„æ¥å£

#### 4.2.1 å†å²è®°å½•è¯¦æƒ…

```
GET /api/history/{id}
```

**å“åº”**:
```json
{
  "id": 1,
  "image_path": "xxx.jpg",
  "predicted_class": "Tomato___Early_blight",
  "confidence": 0.856,
  "created_at": "2024-12-18T10:30:00Z",
  "top_predictions": [
    {"class": "Tomato___Early_blight", "confidence": 0.856},
    {"class": "Tomato___Late_blight", "confidence": 0.082},
    {"class": "Tomato___Leaf_Mold", "confidence": 0.031}
  ]
}
```

#### 4.2.2 åˆ é™¤å†å²è®°å½•

```
DELETE /api/history/{id}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

#### 4.2.3 æ‰¹é‡åˆ é™¤å†å²è®°å½•

```
DELETE /api/history/batch
```

**è¯·æ±‚ä½“**:
```json
{
  "ids": [1, 2, 3]
}
```

**å“åº”**:
```json
{
  "success": true,
  "deleted_count": 3
}
```

#### 4.2.4 è¶‹åŠ¿ç»Ÿè®¡æ•°æ®

```
GET /api/stats/trend?start_date=2024-01-01&end_date=2024-12-31&granularity=day
```

**å‚æ•°**:
- `start_date`: å¼€å§‹æ—¥æœŸ
- `end_date`: ç»“æŸæ—¥æœŸ
- `granularity`: ç²’åº¦ (day/week/month)

**å“åº”**:
```json
{
  "data": [
    {"date": "2024-12-01", "total": 15, "healthy": 8, "diseased": 7},
    {"date": "2024-12-02", "total": 23, "healthy": 12, "diseased": 11}
  ]
}
```

#### 4.2.5 ç—…å®³çŸ¥è¯†åº“åˆ—è¡¨

```
GET /api/diseases?crop=Tomato
```

**å‚æ•°**:
- `crop`: ä½œç‰©ç±»å‹ (å¯é€‰)

**å“åº”**:
```json
{
  "data": [
    {
      "id": "tomato_early_blight",
      "name_cn": "ç•ªèŒ„æ—©ç–«ç—…",
      "name_en": "Tomato Early Blight",
      "crop": "Tomato",
      "is_healthy": false,
      "description": "å¶ç‰‡ä¸Šå‡ºç°åœ†å½¢æˆ–è¿‘åœ†å½¢è¤è‰²ç—…æ–‘...",
      "image_url": "/static/diseases/tomato_early_blight.jpg"
    }
  ]
}
```

#### 4.2.6 ç—…å®³è¯¦æƒ…

```
GET /api/diseases/{id}
```

**å“åº”**:
```json
{
  "id": "tomato_early_blight",
  "name_cn": "ç•ªèŒ„æ—©ç–«ç—…",
  "name_en": "Tomato Early Blight",
  "crop": "Tomato",
  "is_healthy": false,
  "pathogen": "èŒ„é“¾æ ¼å­¢èŒ (Alternaria solani)",
  "affected_parts": ["å¶ç‰‡", "èŒ", "æœå®"],
  "symptoms": "å¶ç‰‡ä¸Šå‡ºç°åœ†å½¢æˆ–è¿‘åœ†å½¢è¤è‰²ç—…æ–‘ï¼Œå…·æœ‰æ˜æ˜¾çš„åŒå¿ƒè½®çº¹...",
  "conditions": {
    "temperature": "20-25Â°C",
    "humidity": "é«˜æ¹¿ç¯å¢ƒ",
    "other": ["è¿ä½œ", "æ°®è‚¥è¿‡å¤š"]
  },
  "prevention": {
    "agricultural": ["é€‰ç”¨æŠ—ç—…å“ç§", "åˆç†è½®ä½œ", "æ¸…é™¤ç—…æ®‹ä½“"],
    "chemical": [
      {"name": "ç™¾èŒæ¸…", "concentration": "75% WP 600å€æ¶²", "method": "å¶é¢å–·é›¾"},
      {"name": "ä»£æ£®é”°é”Œ", "concentration": "80% WP 500å€æ¶²", "method": "å¶é¢å–·é›¾"}
    ]
  },
  "images": [
    "/static/diseases/tomato_early_blight_1.jpg",
    "/static/diseases/tomato_early_blight_2.jpg"
  ]
}
```

#### 4.2.7 å¢å¼ºçš„é¢„æµ‹æ¥å£

ä¿®æ”¹ç°æœ‰ `/api/predict` æ¥å£ï¼Œè¿”å› Top-3 é¢„æµ‹ç»“æœ:

```json
{
  "predicted_class": "Tomato___Early_blight",
  "confidence": 0.856,
  "image_url": "/uploads/xxx.jpg",
  "top_predictions": [
    {"class": "Tomato___Early_blight", "confidence": 0.856},
    {"class": "Tomato___Late_blight", "confidence": 0.082},
    {"class": "Tomato___Leaf_Mold", "confidence": 0.031}
  ]
}
```

---

## äº”ã€çŠ¶æ€ç®¡ç†è®¾è®¡ (Pinia)

### 5.1 Store æ¨¡å—

#### 5.1.1 App Store

```typescript
// stores/app.ts
interface AppState {
  theme: 'light' | 'dark' | 'system';
  sidebarCollapsed: boolean;
  language: 'zh-CN' | 'en-US';
}
```

#### 5.1.2 Predict Store

```typescript
// stores/predict.ts
interface PredictState {
  currentImage: File | null;
  currentResult: PredictionResult | null;
  isLoading: boolean;
  error: string | null;
}
```

#### 5.1.3 History Store

```typescript
// stores/history.ts
interface HistoryState {
  records: PredictionRecord[];
  total: number;
  currentPage: number;
  pageSize: number;
  filters: HistoryFilters;
  isLoading: boolean;
}
```

#### 5.1.4 Stats Store

```typescript
// stores/stats.ts
interface StatsState {
  overview: StatsOverview | null;
  trend: TrendData[];
  isLoading: boolean;
}
```

---

## å…­ã€è·¯ç”±è®¾è®¡

```typescript
// router/index.ts
const routes = [
  {
    path: '/',
    component: AppLayout,
    children: [
      { path: '', name: 'Dashboard', component: () => import('@/views/Dashboard.vue') },
      { path: 'predict', name: 'Predict', component: () => import('@/views/Predict.vue') },
      { path: 'history', name: 'History', component: () => import('@/views/History.vue') },
      { path: 'analytics', name: 'Analytics', component: () => import('@/views/Analytics.vue') },
      { path: 'diseases', name: 'Diseases', component: () => import('@/views/Diseases.vue') },
      { path: 'diseases/:id', name: 'DiseaseDetail', component: () => import('@/views/DiseaseDetail.vue') },
      { path: 'settings', name: 'Settings', component: () => import('@/views/Settings.vue') },
    ]
  },
  { path: '/:pathMatch(.*)*', name: 'NotFound', component: () => import('@/views/NotFound.vue') }
];
```

---

## ä¸ƒã€å¼€å‘ä»»åŠ¡æ¸…å•

### 7.1 å‰ç«¯å¼€å‘ä»»åŠ¡

| åºå· | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|------|--------|----------|
| F1 | é¡¹ç›®è„šæ‰‹æ¶æ­å»º (Vite + Vue3 + TS) | P0 | 2h |
| F2 | åŸºç¡€å¸ƒå±€ç»„ä»¶ (Layout/Sidebar/Header) | P0 | 4h |
| F3 | è·¯ç”±é…ç½® | P0 | 1h |
| F4 | API è¯·æ±‚å°è£… (Axios) | P0 | 2h |
| F5 | Pinia çŠ¶æ€ç®¡ç†é…ç½® | P0 | 2h |
| F6 | æ™ºèƒ½è¯†åˆ«é¡µé¢ | P0 | 8h |
| F7 | å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ | P0 | 4h |
| F8 | è¯†åˆ«ç»“æœç»„ä»¶ | P0 | 3h |
| F9 | å†å²è®°å½•é¡µé¢ | P1 | 6h |
| F10 | å·¥ä½œå°é¡µé¢ | P1 | 4h |
| F11 | æ•°æ®åˆ†æé¡µé¢ | P1 | 8h |
| F12 | ECharts å›¾è¡¨ç»„ä»¶å°è£… | P1 | 4h |
| F13 | ç—…å®³çŸ¥è¯†åº“é¡µé¢ | P2 | 6h |
| F14 | ç—…å®³è¯¦æƒ…é¡µé¢ | P2 | 4h |
| F15 | ç³»ç»Ÿè®¾ç½®é¡µé¢ | P2 | 3h |
| F16 | æš—è‰²ä¸»é¢˜é€‚é… | P2 | 4h |
| F17 | å“åº”å¼é€‚é… | P2 | 4h |
| F18 | å›½é™…åŒ– (i18n) | P3 | 6h |

### 7.2 åç«¯å¼€å‘ä»»åŠ¡

| åºå· | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|------|--------|----------|
| B1 | å¢å¼ºé¢„æµ‹æ¥å£ (è¿”å› Top-3) | P0 | 2h |
| B2 | å†å²è®°å½•è¯¦æƒ…æ¥å£ | P1 | 1h |
| B3 | åˆ é™¤å†å²è®°å½•æ¥å£ | P1 | 1h |
| B4 | æ‰¹é‡åˆ é™¤æ¥å£ | P1 | 1h |
| B5 | è¶‹åŠ¿ç»Ÿè®¡æ¥å£ | P1 | 3h |
| B6 | ç—…å®³çŸ¥è¯†åº“æ•°æ®å‡†å¤‡ | P2 | 4h |
| B7 | ç—…å®³çŸ¥è¯†åº“æ¥å£ | P2 | 2h |
| B8 | é™æ€èµ„æºæœåŠ¡ (ç—…å®³å›¾ç‰‡) | P2 | 1h |

---

## å…«ã€UI/UX è®¾è®¡è§„èŒƒ

### 8.1 è‰²å½©è§„èŒƒ

| ç”¨é€” | äº®è‰²æ¨¡å¼ | æš—è‰²æ¨¡å¼ |
|------|----------|----------|
| ä¸»è‰² | #409EFF | #409EFF |
| æˆåŠŸè‰² | #67C23A | #67C23A |
| è­¦å‘Šè‰² | #E6A23C | #E6A23C |
| å±é™©è‰² | #F56C6C | #F56C6C |
| èƒŒæ™¯è‰² | #F5F7FA | #141414 |
| æ–‡å­—è‰² | #303133 | #E5EAF3 |

### 8.2 é—´è·è§„èŒƒ

- é¡µé¢è¾¹è·: 24px
- å¡ç‰‡é—´è·: 16px
- ç»„ä»¶å†…è¾¹è·: 16px
- å…ƒç´ é—´è·: 8px / 12px / 16px

### 8.3 å­—ä½“è§„èŒƒ

- æ ‡é¢˜: 20px / 18px / 16px
- æ­£æ–‡: 14px
- è¾…åŠ©æ–‡å­—: 12px
- å­—ä½“æ—: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Microsoft YaHei'

---

## ä¹ã€æ€§èƒ½ä¼˜åŒ–è¦æ±‚

1. **é¦–å±åŠ è½½**: < 3s (3G ç½‘ç»œ)
2. **è·¯ç”±æ‡’åŠ è½½**: æ‰€æœ‰é¡µé¢ç»„ä»¶
3. **å›¾ç‰‡ä¼˜åŒ–**: 
   - ç¼©ç•¥å›¾ä½¿ç”¨ WebP æ ¼å¼
   - æ‡’åŠ è½½éé¦–å±å›¾ç‰‡
4. **ä»£ç åˆ†å‰²**: æŒ‰è·¯ç”±åˆ†å‰²
5. **ç¼“å­˜ç­–ç•¥**: 
   - é™æ€èµ„æºå¼ºç¼“å­˜
   - API æ•°æ®åˆç†ç¼“å­˜

---

## åã€æµ‹è¯•è¦æ±‚

1. **å•å…ƒæµ‹è¯•**: æ ¸å¿ƒç»„ä»¶å’Œå·¥å…·å‡½æ•° (Vitest)
2. **E2E æµ‹è¯•**: æ ¸å¿ƒç”¨æˆ·æµç¨‹ (Cypress)
3. **å…¼å®¹æ€§æµ‹è¯•**: ä¸»æµæµè§ˆå™¨
4. **æ€§èƒ½æµ‹è¯•**: Lighthouse è¯„åˆ† > 80

---

## åä¸€ã€éƒ¨ç½²è¦æ±‚

1. **æ„å»ºäº§ç‰©**: é™æ€æ–‡ä»¶ï¼Œå¯éƒ¨ç½²åˆ° Nginx/CDN
2. **ç¯å¢ƒå˜é‡**: é€šè¿‡ `.env` æ–‡ä»¶é…ç½® API åœ°å€
3. **Docker æ”¯æŒ**: æä¾› Dockerfile

---

## é™„å½• A: ç—…å®³åˆ†ç±»æ˜ å°„è¡¨

| ç´¢å¼• | è‹±æ–‡åç§° | ä¸­æ–‡åç§° | ä½œç‰© |
|------|----------|----------|------|
| 0 | Apple___Apple_scab | è‹¹æœé»‘æ˜Ÿç—… | è‹¹æœ |
| 1 | Apple___Black_rot | è‹¹æœé»‘è…ç—… | è‹¹æœ |
| 2 | Apple___Cedar_apple_rust | è‹¹æœé›ªæ¾é”ˆç—… | è‹¹æœ |
| 3 | Apple___healthy | è‹¹æœå¥åº· | è‹¹æœ |
| 4 | Blueberry___healthy | è“è“å¥åº· | è“è“ |
| 5 | Cherry_(including_sour)___Powdery_mildew | æ¨±æ¡ƒç™½ç²‰ç—… | æ¨±æ¡ƒ |
| 6 | Cherry_(including_sour)___healthy | æ¨±æ¡ƒå¥åº· | æ¨±æ¡ƒ |
| 7 | Corn_(maize)___Cercospora_leaf_spot Gray_leaf_spot | ç‰ç±³ç°æ–‘ç—… | ç‰ç±³ |
| 8 | Corn_(maize)___Common_rust_ | ç‰ç±³æ™®é€šé”ˆç—… | ç‰ç±³ |
| 9 | Corn_(maize)___Northern_Leaf_Blight | ç‰ç±³å¤§æ–‘ç—… | ç‰ç±³ |
| 10 | Corn_(maize)___healthy | ç‰ç±³å¥åº· | ç‰ç±³ |
| 11 | Grape___Black_rot | è‘¡è„é»‘è…ç—… | è‘¡è„ |
| 12 | Grape___Esca_(Black_Measles) | è‘¡è„é»‘éº»ç–¹ç—… | è‘¡è„ |
| 13 | Grape___Leaf_blight_(Isariopsis_Leaf_Spot) | è‘¡è„å¶æ¯ç—… | è‘¡è„ |
| 14 | Grape___healthy | è‘¡è„å¥åº· | è‘¡è„ |
| 15 | Orange___Haunglongbing_(Citrus_greening) | æŸ‘æ©˜é»„é¾™ç—… | æ©™å­ |
| 16 | Peach___Bacterial_spot | æ¡ƒç»†èŒæ€§ç©¿å­”ç—… | æ¡ƒå­ |
| 17 | Peach___healthy | æ¡ƒå­å¥åº· | æ¡ƒå­ |
| 18 | Pepper,_bell___Bacterial_spot | ç”œæ¤’ç»†èŒæ€§æ–‘ç‚¹ç—… | ç”œæ¤’ |
| 19 | Pepper,_bell___healthy | ç”œæ¤’å¥åº· | ç”œæ¤’ |
| 20 | Potato___Early_blight | é©¬é“ƒè–¯æ—©ç–«ç—… | é©¬é“ƒè–¯ |
| 21 | Potato___Late_blight | é©¬é“ƒè–¯æ™šç–«ç—… | é©¬é“ƒè–¯ |
| 22 | Potato___healthy | é©¬é“ƒè–¯å¥åº· | é©¬é“ƒè–¯ |
| 23 | Raspberry___healthy | æ ‘è“å¥åº· | æ ‘è“ |
| 24 | Soybean___healthy | å¤§è±†å¥åº· | å¤§è±† |
| 25 | Squash___Powdery_mildew | å—ç“œç™½ç²‰ç—… | å—ç“œ |
| 26 | Strawberry___Leaf_scorch | è‰è“å¶ç„¦ç—… | è‰è“ |
| 27 | Strawberry___healthy | è‰è“å¥åº· | è‰è“ |
| 28 | Tomato___Bacterial_spot | ç•ªèŒ„ç»†èŒæ€§æ–‘ç‚¹ç—… | ç•ªèŒ„ |
| 29 | Tomato___Early_blight | ç•ªèŒ„æ—©ç–«ç—… | ç•ªèŒ„ |
| 30 | Tomato___Late_blight | ç•ªèŒ„æ™šç–«ç—… | ç•ªèŒ„ |
| 31 | Tomato___Leaf_Mold | ç•ªèŒ„å¶éœ‰ç—… | ç•ªèŒ„ |
| 32 | Tomato___Septoria_leaf_spot | ç•ªèŒ„æ–‘æ¯ç—… | ç•ªèŒ„ |
| 33 | Tomato___Spider_mites Two-spotted_spider_mite | ç•ªèŒ„çº¢èœ˜è›› | ç•ªèŒ„ |
| 34 | Tomato___Target_Spot | ç•ªèŒ„é¶æ–‘ç—… | ç•ªèŒ„ |
| 35 | Tomato___Tomato_Yellow_Leaf_Curl_Virus | ç•ªèŒ„é»„åŒ–æ›²å¶ç—…æ¯’ç—… | ç•ªèŒ„ |
| 36 | Tomato___Tomato_mosaic_virus | ç•ªèŒ„èŠ±å¶ç—…æ¯’ç—… | ç•ªèŒ„ |
| 37 | Tomato___healthy | ç•ªèŒ„å¥åº· | ç•ªèŒ„ |

---

*æ–‡æ¡£ç»“æŸ*